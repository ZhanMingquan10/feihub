# ç²¾ç¡®ä¿®å¤é‡å¤ä»£ç  - æ‰§è¡Œæ­¥éª¤

## ğŸ”§ åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub/backend/src/lib

# å¤‡ä»½
cp feishu-puppeteer.ts feishu-puppeteer.ts.backup4

# ä¿®å¤ï¼šå°†ç¬¬193è¡Œçš„é‡å¤ä»£ç æ›¿æ¢ä¸ºæ­£ç¡®çš„ä»£ç 
sed -i '193s/if (el) { return (el.innerText || el.textContent || "").trim(); } return null;/return (el.innerText || el.textContent || "").trim();/' feishu-puppeteer.ts

# éªŒè¯ä¿®å¤
echo "ä¿®å¤åçš„ä»£ç ï¼š"
sed -n '185,200p' feishu-puppeteer.ts
```

---

## âœ… ä¿®å¤ååº”è¯¥çœ‹åˆ°ï¼š

```typescript
      const dateElementText = await page.evaluate(() => {
        const el = document.querySelector(".doc-info-time-item") as HTMLElement | null;
        if (el) {
          return (el.innerText || el.textContent || "").trim();
        }
        return null;
      });
```

---

## ğŸš€ ç„¶åé‡æ–°æ„å»º

```bash
cd /www/wwwroot/feihub/backend

# é‡æ–°æ„å»º
npm run build

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "âœ… æ„å»ºæˆåŠŸ"
    
    # å®Œå…¨é‡å¯ PM2
    pm2 stop feihub-backend
    pm2 delete feihub-backend
    pm2 start npm --name feihub-backend -- run start
    
    echo "âœ… éƒ¨ç½²å®Œæˆ"
else
    echo "âŒ æ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼š"
    npm run build 2>&1 | tail -30
fi
```

