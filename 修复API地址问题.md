# ä¿®å¤ API åœ°å€é—®é¢˜

## ğŸ” é—®é¢˜åˆ†æ

ä»æµè§ˆå™¨æ§åˆ¶å°çœ‹ï¼š
- è¯·æ±‚çš„æ˜¯ `https://feihub.top/api/documents/hot-keywords`
- ä½†é€šè¿‡ IP è®¿é—®æ—¶ï¼Œè¿™ä¸ªåŸŸåæ— æ³•è§£æ
- è¯´æ˜å‰ç«¯ä»£ç å¯èƒ½è¿˜åœ¨ä½¿ç”¨æ—§çš„ API åœ°å€

**å¯èƒ½åŸå› **ï¼š
1. æµè§ˆå™¨ç¼“å­˜äº†æ—§çš„ JavaScript æ–‡ä»¶
2. ç¯å¢ƒå˜é‡æ²¡æœ‰æ­£ç¡®åŠ è½½åˆ°æ„å»ºåçš„ä»£ç ä¸­
3. éœ€è¦å®Œå…¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### ç¬¬ä¸€æ­¥ï¼šå®Œå…¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

åœ¨æµè§ˆå™¨ä¸­ï¼š

1. **æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ— ç—•æ¨¡å¼**
   - æŒ‰ `Ctrl + Shift + N`ï¼ˆChromeï¼‰æˆ– `Ctrl + Shift + P`ï¼ˆFirefoxï¼‰
   - åœ¨æ— ç—•çª—å£ä¸­è®¿é—®ï¼š`http://121.40.214.130`

2. **æ–¹æ³•äºŒï¼šå®Œå…¨æ¸…é™¤ç¼“å­˜**
   - æŒ‰ `Ctrl + Shift + Delete`
   - é€‰æ‹© **"æ‰€æœ‰æ—¶é—´"**
   - å‹¾é€‰ **"ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶"** å’Œ **"Cookie å’Œå…¶ä»–ç½‘ç«™æ•°æ®"**
   - ç‚¹å‡» **"æ¸…é™¤æ•°æ®"**

3. **æ–¹æ³•ä¸‰ï¼šç¡¬åˆ·æ–°**
   - æŒ‰ `Ctrl + F5`ï¼ˆWindowsï¼‰æˆ– `Cmd + Shift + R`ï¼ˆMacï¼‰
   - å¤šæ¬¡åˆ·æ–°

---

### ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥æ„å»ºåçš„æ–‡ä»¶

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# æ£€æŸ¥æ„å»ºåçš„ JavaScript æ–‡ä»¶ä¸­çš„ API åœ°å€
grep -r "feihub.top" dist/assets/*.js | head -5

# æ£€æŸ¥æ˜¯å¦æœ‰æ­£ç¡®çš„ IP åœ°å€
grep -r "121.40.214.130" dist/assets/*.js | head -5
```

**å¦‚æœè¿˜æ˜¯æ˜¾ç¤ºåŸŸåï¼Œè¯´æ˜ç¯å¢ƒå˜é‡æ²¡æœ‰æ­£ç¡®åŠ è½½ã€‚**

---

### ç¬¬ä¸‰æ­¥ï¼šé‡æ–°æ„å»ºï¼ˆç¡®ä¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼‰

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# ç¡®è®¤ç¯å¢ƒå˜é‡
cat .env.production

# åˆ é™¤ dist ç›®å½•ï¼ˆé™¤äº† .user.iniï¼‰
rm -rf dist/assets
rm -rf dist/index.html

# é‡æ–°æ„å»º
npm run build

# æ£€æŸ¥æ„å»ºåçš„æ–‡ä»¶
grep -r "121.40.214.130" dist/assets/*.js | head -3
```

---

### ç¬¬å››æ­¥ï¼šæ£€æŸ¥åç«¯ CORS é…ç½®

ç¡®ä¿åç«¯å…è®¸æ¥è‡ª IP åœ°å€çš„è¯·æ±‚ï¼š

```bash
cd /www/wwwroot/feihub/backend

# æ£€æŸ¥ CORS é…ç½®
cat .env | grep CORS_ORIGIN

# å¦‚æœåªé…ç½®äº†åŸŸåï¼Œéœ€è¦æ·»åŠ  IP
sed -i 's|CORS_ORIGIN=.*|CORS_ORIGIN=http://121.40.214.130,https://feihub.top,http://feihub.top|' .env

# é‡å¯åç«¯
pm2 restart feihub-backend
```

---

## ğŸš€ å®Œæ•´ä¿®å¤æµç¨‹

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# 1. ç¡®è®¤ç¯å¢ƒå˜é‡
cd /www/wwwroot/feihub
cat .env.production

# 2. æ¸…ç†å¹¶é‡æ–°æ„å»º
rm -rf dist/assets dist/index.html
npm run build

# 3. æ£€æŸ¥æ„å»ºç»“æœ
grep -r "121.40.214.130" dist/assets/*.js | head -3

# 4. ä¿®æ”¹åç«¯ CORSï¼ˆå¦‚æœéœ€è¦ï¼‰
cd /www/wwwroot/feihub/backend
sed -i 's|CORS_ORIGIN=.*|CORS_ORIGIN=http://121.40.214.130,https://feihub.top,http://feihub.top|' .env
pm2 restart feihub-backend
```

---

## âœ… éªŒè¯ä¿®å¤

ä¿®å¤åï¼š

1. **å®Œå…¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼ˆä½¿ç”¨æ— ç—•æ¨¡å¼æˆ–æ¸…é™¤æ‰€æœ‰ç¼“å­˜ï¼‰
2. **è®¿é—®**ï¼š`http://121.40.214.130`
3. **æ‰“å¼€å¼€å‘è€…å·¥å…·**ï¼ˆF12ï¼‰
4. **æŸ¥çœ‹ç½‘ç»œè¯·æ±‚**ï¼š
   - åº”è¯¥çœ‹åˆ°è¯·æ±‚çš„æ˜¯ `http://121.40.214.130/api/...`
   - è€Œä¸æ˜¯ `https://feihub.top/api/...`
5. **æµ‹è¯•æäº¤æ–‡æ¡£**ï¼š
   - åº”è¯¥èƒ½æˆåŠŸæäº¤

---

## ğŸ¯ ç°åœ¨æ‰§è¡Œ

å…ˆæ‰§è¡Œå®Œæ•´ä¿®å¤æµç¨‹ï¼š

```bash
cd /www/wwwroot/feihub
cat .env.production
rm -rf dist/assets dist/index.html
npm run build
grep -r "121.40.214.130" dist/assets/*.js | head -3
```

ç„¶åï¼š
1. **å®Œå…¨æ¸…é™¤æµè§ˆå™¨ç¼“å­˜**ï¼ˆä½¿ç”¨æ— ç—•æ¨¡å¼ï¼‰
2. **è®¿é—®**ï¼š`http://121.40.214.130`
3. **æŸ¥çœ‹ç½‘ç»œè¯·æ±‚**ï¼Œç¡®è®¤è¯·æ±‚çš„æ˜¯ IP åœ°å€è€Œä¸æ˜¯åŸŸå

å‘Šè¯‰æˆ‘ç»“æœï¼Œæˆ‘ä»¬ç»§ç»­ï¼


