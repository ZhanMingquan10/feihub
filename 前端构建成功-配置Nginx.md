# 前端构建成功 - 配置 Nginx

## ✅ 已完成
- [x] 后端服务运行正常
- [x] 前端依赖已安装
- [x] 前端构建成功

---

## 🚀 下一步操作

### 第一步：上传客服图片

在宝塔文件管理器中：
1. 进入 `/www/wwwroot/feihub/dist`
2. 上传 `kefu.png` 文件到这个目录
   - 如果本地有 `kefu.png`，可以通过宝塔文件管理器上传
   - 或者从本地复制到服务器

---

### 第二步：配置 Nginx

#### 1. 在宝塔面板添加网站

1. 点击左侧 **"网站"**
2. 点击 **"添加站点"**
3. 填写：
   - **域名**：`feihub.top`（和 `www.feihub.top`）
   - **根目录**：`/www/wwwroot/feihub/dist`
   - **PHP版本**：纯静态
4. 点击 **"提交"**

---

#### 2. 配置反向代理（用于后端 API）

1. 点击站点右侧 **"设置"**
2. 点击 **"反向代理"** → **"添加反向代理"**
3. 填写：
   - **代理名称**：`api`
   - **目标URL**：`http://127.0.0.1:4000`
   - **发送域名**：`$host`
4. 点击 **"提交"**

---

#### 3. 配置反向代理规则（重要）

1. 在反向代理设置中，点击 **"配置文件"**
2. 找到 `location /api` 部分，确保配置如下：

```nginx
location /api {
    proxy_pass http://127.0.0.1:4000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

**注意**：如果宝塔面板自动生成的配置不同，需要手动修改。

---

#### 4. 配置 SSL 证书（推荐）

1. 点击站点右侧 **"设置"**
2. 点击 **"SSL"** → **"Let's Encrypt"**
3. 勾选域名，点击 **"申请"**
4. 等待申请完成（可能需要几分钟）
5. 申请成功后，点击 **"强制HTTPS"**

---

### 第三步：验证部署

1. **访问网站**：`https://feihub.top`
2. **测试功能**：
   - 查看首页（应该显示 0 篇文章）
   - 尝试分享一个文档
   - 查看文档详情
   - 测试搜索功能

---

## 📋 检查清单

- [x] 后端服务运行正常（online）
- [x] 前端已构建（`dist` 目录有文件）
- [ ] 客服图片已上传（`kefu.png` 在 `dist` 目录）
- [ ] Nginx 已配置（网站可以访问）
- [ ] SSL 证书已配置（可以使用 HTTPS）
- [ ] 网站功能正常（可以搜索、分享文档）

---

## 🆘 常见问题

### 问题 1：网站无法访问

- 检查域名解析是否正确
- 检查 Nginx 配置是否正确
- 检查防火墙端口是否开放（80、443）

### 问题 2：API 请求失败

- 检查反向代理配置是否正确
- 检查后端服务是否运行（`pm2 status`）
- 检查后端日志（`pm2 logs feihub-backend`）

### 问题 3：SSL 证书申请失败

- 检查域名解析是否正确
- 检查 80 端口是否开放
- 等待几分钟后重试

---

## 🎉 完成！

完成以上步骤后，你的 FeiHub 网站就可以正常访问了！

---

## 🎯 现在执行

1. **上传客服图片**（在宝塔文件管理器）
2. **配置 Nginx**（在宝塔面板）
3. **验证部署**（访问网站测试）

完成后告诉我结果，我们继续！


