# ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿä½¿ç”¨è¯´æ˜

## ğŸ“¦ åŠŸèƒ½

ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿå¯ä»¥å¸®åŠ©ä½ ï¼š
1. ä¿å­˜ä»£ç ç‰ˆæœ¬ï¼ˆå¸¦æè¿°ï¼‰
2. æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬åˆ—è¡¨
3. æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬
4. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯
5. å¯¹æ¯”ç‰ˆæœ¬å·®å¼‚

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä¿å­˜ç‰ˆæœ¬

åœ¨ä¿®æ”¹ä»£ç å‰ï¼Œå…ˆä¿å­˜å½“å‰ç‰ˆæœ¬ï¼š

```bash
cd /www/wwwroot/feihub/backend/src/lib
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh save "ä¿®å¤æ—¥æœŸæå–é—®é¢˜"
```

æˆ–è€…ï¼š

```bash
bash /www/wwwroot/feihub/backend/src/lib/ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh save "ä¼˜åŒ–å†…å®¹æå–é€»è¾‘"
```

### 2. æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬

```bash
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh list
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
=== ç‰ˆæœ¬åˆ—è¡¨ ===

ç‰ˆæœ¬å·               æè¿°                            ä¿å­˜æ—¶é—´
--------------------------------------------------------------------------------
v20251201_143022     ä¼˜åŒ–å†…å®¹æå–é€»è¾‘                 2025-12-01 14:30:22
v20251201_120000     ä¿®å¤æ—¥æœŸæå–é—®é¢˜                 2025-12-01 12:00:00
```

### 3. æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬

```bash
# æ¢å¤åˆ°æŒ‡å®šç‰ˆæœ¬
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh restore v20251201_120000

# æ¢å¤åˆ°æœ€æ–°ç‰ˆæœ¬
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh restore latest
```

æ¢å¤åéœ€è¦æ‰‹åŠ¨é‡æ–°æ„å»ºï¼š
```bash
cd /www/wwwroot/feihub/backend
npm run build
pm2 restart feihub-backend
```

### 4. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯

```bash
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh current
```

### 5. å¯¹æ¯”ç‰ˆæœ¬å·®å¼‚

```bash
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh diff v20251201_120000
```

## ğŸ“ æœ€ä½³å®è·µ

1. **ä¿®æ”¹å‰ä¿å­˜**ï¼šæ¯æ¬¡ä¿®æ”¹ä»£ç å‰ï¼Œå…ˆä¿å­˜å½“å‰ç‰ˆæœ¬
2. **æè¿°æ¸…æ™°**ï¼šä½¿ç”¨æ¸…æ™°çš„æè¿°ï¼Œæ–¹ä¾¿åç»­æŸ¥æ‰¾
3. **å®šæœŸæ¸…ç†**ï¼šå®šæœŸæ¸…ç†æ—§ç‰ˆæœ¬ï¼ˆä¿ç•™æœ€è¿‘10-20ä¸ªç‰ˆæœ¬ï¼‰

## ğŸ”§ å®‰è£…

å°† `ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh` å¤åˆ¶åˆ°æœåŠ¡å™¨ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /www/wwwroot/feihub/backend/src/lib
# ç„¶ååˆ›å»ºç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.shæ–‡ä»¶ï¼ˆå†…å®¹è§ä¸Šé¢çš„è„šæœ¬ï¼‰
chmod +x ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
/www/wwwroot/feihub/backend/src/lib/
â”œâ”€â”€ feishu-puppeteer.ts          # å½“å‰æ–‡ä»¶
â””â”€â”€ versions/                    # ç‰ˆæœ¬ç›®å½•
    â”œâ”€â”€ feishu-puppeteer.ts.v20251201_143022
    â”œâ”€â”€ feishu-puppeteer.ts.v20251201_120000
    â”œâ”€â”€ feishu-puppeteer.ts.latest  # æŒ‡å‘æœ€æ–°ç‰ˆæœ¬çš„ç¬¦å·é“¾æ¥
    â””â”€â”€ versions.txt             # ç‰ˆæœ¬ä¿¡æ¯è®°å½•
```

## ğŸ’¡ ç¤ºä¾‹å·¥ä½œæµ

```bash
# 1. ä¿®æ”¹ä»£ç å‰ï¼Œå…ˆä¿å­˜å½“å‰ç‰ˆæœ¬
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh save "å½“å‰ç¨³å®šç‰ˆæœ¬"

# 2. è¿›è¡Œä¿®æ”¹...

# 3. å¦‚æœä¿®æ”¹æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹ç‰ˆæœ¬åˆ—è¡¨
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh list

# 4. æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬
bash ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿ.sh restore v20251201_143022

# 5. é‡æ–°æ„å»º
cd /www/wwwroot/feihub/backend
npm run build
pm2 restart feihub-backend
```

