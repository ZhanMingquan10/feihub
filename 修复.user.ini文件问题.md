# ä¿®å¤ .user.ini æ–‡ä»¶é—®é¢˜

## ğŸ” é—®é¢˜è¯´æ˜

`.user.ini` æ–‡ä»¶æ— æ³•åˆ é™¤ï¼Œå¯èƒ½æ˜¯è®¾ç½®äº† `immutable`ï¼ˆä¸å¯å˜ï¼‰å±æ€§ã€‚

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šç§»é™¤æ–‡ä»¶å±æ€§ååˆ é™¤ï¼ˆæ¨èï¼‰

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# æ£€æŸ¥æ–‡ä»¶å±æ€§
lsattr dist/.user.ini

# ç§»é™¤ immutable å±æ€§ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
chattr -i dist/.user.ini 2>/dev/null || true

# åˆ é™¤æ–‡ä»¶
rm -f dist/.user.ini

# é‡æ–°æ„å»º
npm run build
```

---

### æ–¹æ¡ˆäºŒï¼šä¿®æ”¹ Vite é…ç½®ï¼Œä½¿ç”¨ä¸åŒçš„è¾“å‡ºç›®å½•

å¦‚æœæ–¹æ¡ˆä¸€ä¸è¡Œï¼Œå¯ä»¥ä¿®æ”¹ `vite.config.ts`ï¼Œä½¿ç”¨ä¸åŒçš„è¾“å‡ºç›®å½•ã€‚

---

### æ–¹æ¡ˆä¸‰ï¼šåœ¨æ„å»ºå‰è‡ªåŠ¨æ¸…ç†ï¼ˆæ¨èï¼Œé•¿æœŸæ–¹æ¡ˆï¼‰

ä¿®æ”¹ `package.json` çš„æ„å»ºè„šæœ¬ï¼Œåœ¨æ„å»ºå‰è‡ªåŠ¨æ¸…ç†ã€‚

---

## ğŸš€ å¿«é€Ÿä¿®å¤ï¼ˆæ¨èæ–¹æ¡ˆä¸€ï¼‰

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# ç§»é™¤æ–‡ä»¶å±æ€§
chattr -i dist/.user.ini 2>/dev/null || true

# åˆ é™¤æ–‡ä»¶
rm -f dist/.user.ini

# å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°è¯•å¼ºåˆ¶åˆ é™¤
sudo chattr -i dist/.user.ini 2>/dev/null || true
sudo rm -f dist/.user.ini

# é‡æ–°æ„å»º
npm run build
```

---

### å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œä¿®æ”¹æ„å»ºè¾“å‡ºç›®å½•

å¦‚æœæ–‡ä»¶ç¡®å®æ— æ³•åˆ é™¤ï¼Œå¯ä»¥ä¿®æ”¹ `vite.config.ts`ï¼Œä½¿ç”¨ä¸åŒçš„è¾“å‡ºç›®å½•ï¼š

```typescript
build: {
  outDir: 'dist-build', // ä½¿ç”¨ä¸åŒçš„ç›®å½•
}
```

ç„¶åä¿®æ”¹ Nginx é…ç½®æŒ‡å‘æ–°ç›®å½•ã€‚

---

## ğŸ” æ£€æŸ¥æ–‡ä»¶å±æ€§

å…ˆæ£€æŸ¥æ–‡ä»¶å±æ€§ï¼š

```bash
cd /www/wwwroot/feihub

# æ£€æŸ¥æ–‡ä»¶å±æ€§
lsattr dist/.user.ini

# æŸ¥çœ‹æ–‡ä»¶è¯¦ç»†ä¿¡æ¯
ls -la dist/.user.ini
```

**æŠŠç»“æœå‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ åˆ†æã€‚**

---

## ğŸ¯ ç°åœ¨æ‰§è¡Œ

å…ˆæ‰§è¡Œæ£€æŸ¥å‘½ä»¤ï¼š

```bash
cd /www/wwwroot/feihub
lsattr dist/.user.ini
ls -la dist/.user.ini
```

ç„¶åå°è¯•ç§»é™¤å±æ€§å¹¶åˆ é™¤ï¼š

```bash
chattr -i dist/.user.ini 2>/dev/null || true
sudo chattr -i dist/.user.ini 2>/dev/null || true
sudo rm -f dist/.user.ini
npm run build
```

å‘Šè¯‰æˆ‘ç»“æœï¼Œæˆ‘ä»¬ç»§ç»­ï¼


