# 修复网站访问问题 - 最终方案

## 🔍 问题分析

从测试结果看：
- 反向代理配置正确 ✓
- Nginx 正在运行 ✓
- 但 `curl http://localhost` 返回的是默认页面，不是我们的网站

**原因**：通过 `localhost` 访问时，Nginx 可能匹配到了默认站点，而不是 `feihub.top` 的配置。

---

## 🔧 解决方案

### 方案一：测试通过域名访问（推荐）

在宝塔终端执行：

```bash
# 1. 测试通过域名访问（需要域名解析已生效）
curl -H "Host: feihub.top" http://localhost

# 2. 或者直接测试域名（如果域名解析已生效）
curl http://feihub.top
```

---

### 方案二：检查默认站点配置

```bash
# 查看默认站点配置
ls -la /www/server/panel/vhost/nginx/

# 查看是否有默认站点覆盖
cat /www/server/nginx/conf/nginx.conf | grep -A 10 "default_server"
```

---

### 方案三：检查域名解析

**在本地电脑**（不是服务器）执行：

```bash
ping feihub.top
```

或者访问：https://www.whatsmydns.net/
- 输入域名：`feihub.top`
- 检查 A 记录是否指向服务器 IP

---

### 方案四：检查防火墙

在宝塔面板：
1. 点击左侧 **"安全"**
2. 检查 **"系统防火墙"** 或 **"防火墙"**
3. 确保 **80 端口** 和 **443 端口** 已开放

---

## 🚀 快速测试

在宝塔终端执行：

```bash
# 1. 测试通过 Host 头访问
curl -H "Host: feihub.top" http://localhost | head -20

# 2. 检查默认站点
ls -la /www/server/panel/vhost/nginx/ | grep default

# 3. 检查服务器 IP
curl ifconfig.me
```

---

## 📝 可能的问题

### 问题 1：域名解析未生效（最常见）

**检查方法**：
- 在本地电脑执行 `ping feihub.top`
- 查看返回的 IP 是否是服务器 IP

**解决方案**：
- 如果 IP 不对，检查域名 DNS 配置
- 等待 DNS 生效（可能需要几分钟到几小时）

---

### 问题 2：防火墙阻止访问

**检查方法**：
- 在宝塔面板 → 安全 → 防火墙
- 检查 80 和 443 端口是否开放

**解决方案**：
- 如果未开放，添加规则开放 80 和 443 端口

---

### 问题 3：默认站点覆盖

**检查方法**：
- 查看是否有默认站点配置

**解决方案**：
- 删除或禁用默认站点

---

## 🎯 现在执行

先执行这些命令：

```bash
# 1. 测试通过 Host 头访问
curl -H "Host: feihub.top" http://localhost | head -20

# 2. 检查服务器 IP
curl ifconfig.me
```

然后：
1. **在本地电脑**执行 `ping feihub.top`，看看 IP 是否正确
2. **在宝塔面板**检查防火墙，确保 80 和 443 端口已开放

把结果发给我，我们继续排查。


