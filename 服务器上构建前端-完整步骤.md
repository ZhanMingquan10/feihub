# æœåŠ¡å™¨ä¸Šæ„å»ºå‰ç«¯ - å®Œæ•´æ­¥éª¤

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

æˆ‘å·²ç»åœ¨æœ¬åœ°åˆ›å»ºäº†ä»¥ä¸‹æ–‡ä»¶ï¼ˆå·²æ¨é€åˆ° GitHubï¼‰ï¼š
1. `index.html` - HTML å…¥å£æ–‡ä»¶
2. `vite.config.ts` - Vite é…ç½®æ–‡ä»¶
3. `src/main.tsx` - React å…¥å£æ–‡ä»¶ï¼ˆTypeScriptï¼‰

## ğŸš€ åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
cd /www/wwwroot/feihub

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main
```

### ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
# æ£€æŸ¥å…³é”®æ–‡ä»¶
ls -la index.html
ls -la vite.config.ts
ls -la src/main.tsx
```

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯´æ˜è¿˜æ²¡æ¨é€åˆ° GitHubã€‚ä½ å¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¿™äº›æ–‡ä»¶ï¼ˆè§ä¸‹æ–¹ï¼‰ã€‚

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…å‰ç«¯ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼ˆ/www/wwwroot/feihubï¼‰
npm install
```

### ç¬¬å››æ­¥ï¼šæ„å»ºå‰ç«¯

```bash
# æ„å»ºå‰ç«¯
npm run build
```

å¦‚æœé‡åˆ°é”™è¯¯ï¼Œå¯èƒ½éœ€è¦åˆ›å»º `tsconfig.json`ã€‚å‘Šè¯‰æˆ‘é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä¼šå¸®ä½ åˆ›å»ºã€‚

### ç¬¬äº”æ­¥ï¼šéªŒè¯æ„å»ºç»“æœ

```bash
# æ£€æŸ¥ dist æ–‡ä»¶å¤¹
ls -la dist/
```

åº”è¯¥çœ‹åˆ°ï¼š
- `dist/index.html`
- `dist/assets/` æ–‡ä»¶å¤¹

### ç¬¬å…­æ­¥ï¼šé…ç½® Nginxï¼ˆå¦‚æœéœ€è¦ï¼‰

ç¡®ä¿ Nginx é…ç½®æŒ‡å‘ `dist` æ–‡ä»¶å¤¹ï¼š

```nginx
server {
    listen 80;
    server_name feihub.top www.feihub.top _;
    
    root /www/wwwroot/feihub/dist;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:4000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## ğŸ“ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨åˆ›å»º

### åˆ›å»º index.html

```bash
cat > /www/wwwroot/feihub/index.html << 'EOF'
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FeiHub - é£ä¹¦æ–‡æ¡£åˆ†äº«å¹³å°</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
EOF
```

### åˆ›å»º vite.config.ts

```bash
cat > /www/wwwroot/feihub/vite.config.ts << 'EOF'
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  build: {
    outDir: 'dist',
    sourcemap: false,
  },
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:4000',
        changeOrigin: true,
      },
    },
  },
})
EOF
```

### åˆ›å»º src/main.tsx

```bash
cat > /www/wwwroot/feihub/src/main.tsx << 'EOF'
import React from "react";
import ReactDOM from "react-dom/client";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import App from "./App";
import "./styles/index.css";

const queryClient = new QueryClient();

ReactDOM.createRoot(document.getElementById("root")!).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
      <App />
    </QueryClientProvider>
  </React.StrictMode>
);
EOF
```

---

## ğŸ¯ æ‰§è¡Œé¡ºåº

1. å…ˆæ‰§è¡Œ `git pull origin main` æ‹‰å–ä»£ç 
2. å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œç›´æ¥æ‰§è¡Œ `npm run build`
3. å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨åˆ›å»ºä¸Šè¿°ä¸‰ä¸ªæ–‡ä»¶
4. ç„¶åæ‰§è¡Œ `npm run build`

---

è¯·å…ˆåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œç¬¬ä¸€æ­¥ï¼ˆ`git pull`ï¼‰ï¼Œç„¶åå‘Šè¯‰æˆ‘ç»“æœã€‚

