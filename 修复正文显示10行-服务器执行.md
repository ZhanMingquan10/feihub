# 修复正文显示10行 - 服务器执行步骤

## 🔍 问题分析

本地代码已经包含10行限制，但服务器上构建的代码可能没有这个修改。

## 🚀 解决步骤

### 第一步：检查服务器上的代码

```bash
cd /www/wwwroot/feihub

# 检查 App.tsx 是否包含 10 行限制的代码
grep -n "WebkitLineClamp" src/App.tsx
```

如果找不到，说明代码没有更新。

### 第二步：拉取最新代码

```bash
cd /www/wwwroot/feihub

# 拉取最新代码
git pull origin main
```

### 第三步：检查代码是否包含修改

```bash
# 再次检查
grep -n "WebkitLineClamp" src/App.tsx
```

应该看到类似这样的输出：
```
380:              <p className={clsx("mt-4 text-sm leading-relaxed whitespace-pre-wrap overflow-hidden", isDarkMode ? "text-gray-300" : "text-gray-600")} style={{ display: '-webkit-box', WebkitLineClamp: 10, WebkitBoxOrient: 'vertical' }}>
```

### 第四步：重新构建前端

```bash
# 重新构建
npm run build
```

### 第五步：验证构建结果

```bash
# 检查 dist 文件夹
ls -la dist/assets/

# 应该看到新的 JS 文件（文件名会不同）
```

### 第六步：重载 Nginx（如果需要）

```bash
nginx -s reload
```

### 第七步：清除浏览器缓存

在浏览器中按 `Ctrl + Shift + R`（Windows）或 `Cmd + Shift + R`（Mac）强制刷新页面。

---

## 📝 如果 git pull 后代码还是没有修改

可能需要手动修改服务器上的代码。执行以下命令：

```bash
cd /www/wwwroot/feihub/src

# 备份原文件
cp App.tsx App.tsx.bak

# 查找需要修改的行（大约在第380行）
sed -n '375,385p' App.tsx
```

然后手动编辑文件，找到显示预览文本的 `<p>` 标签，添加样式：

```tsx
<p className={clsx("mt-4 text-sm leading-relaxed whitespace-pre-wrap overflow-hidden", isDarkMode ? "text-gray-300" : "text-gray-600")} style={{ display: '-webkit-box', WebkitLineClamp: 10, WebkitBoxOrient: 'vertical' }}>
  {doc.preview || "暂无预览"}
</p>
```

---

请先执行第一步和第二步，告诉我结果。

