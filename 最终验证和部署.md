# æœ€ç»ˆéªŒè¯å’Œéƒ¨ç½²

## âœ… ç¬¬ä¸€æ­¥ï¼šéªŒè¯æ‰€æœ‰ä¿®å¤

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub/backend/src/lib

# éªŒè¯æ‰€æœ‰ä¿®å¤ç‚¹
echo "=== éªŒè¯ä¿®å¤ç‚¹ ==="
echo "1. ç­‰å¾…æ—¥æœŸå…ƒç´ ä»£ç ï¼š"
grep -n "é¢å¤–ç­‰å¾…ï¼Œç¡®ä¿æ—¥æœŸå…ƒç´ åŠ è½½å®Œæˆ" feishu-puppeteer.ts

echo ""
echo "2. æ‰¾åˆ°æ—¥æœŸå…ƒç´ æ—¥å¿—ï¼š"
grep -n "æ‰¾åˆ°æ—¥æœŸå…ƒç´ " feishu-puppeteer.ts

echo ""
echo "3. ä¼˜å…ˆæŸ¥æ‰¾ .doc-info-time-itemï¼š"
grep -n "æ‰¾åˆ°æ—¥æœŸæ¥æº: .doc-info-time-item" feishu-puppeteer.ts

echo ""
echo "4. pageData æå–ç»“æœæ—¥å¿—ï¼š"
grep -n "pageData æå–ç»“æœ" feishu-puppeteer.ts

echo ""
echo "5. æ—¥æœŸè§£ææ—¥å¿—ï¼š"
grep -n "å‡†å¤‡è§£ææ—¥æœŸ" feishu-puppeteer.ts | head -2

echo ""
echo "6. .doc-info-time-item åœ¨é€‰æ‹©å™¨ä¸­ï¼š"
grep -n "doc-info-time-item" feishu-puppeteer.ts | head -2
```

---

## ğŸš€ ç¬¬äºŒæ­¥ï¼šé‡æ–°æ„å»ºå’Œéƒ¨ç½²

```bash
cd /www/wwwroot/feihub/backend

# é‡æ–°æ„å»º
echo "å¼€å§‹æ„å»º..."
npm run build

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "âœ… æ„å»ºæˆåŠŸ"
    
    # å®Œå…¨é‡å¯ PM2
    echo "é‡å¯ PM2..."
    pm2 stop feihub-backend
    pm2 delete feihub-backend
    pm2 start npm --name feihub-backend -- run start
    
    # ç­‰å¾…å¯åŠ¨
    sleep 5
    
    # æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
    echo ""
    echo "=== å¯åŠ¨æ—¥å¿— ==="
    pm2 logs feihub-backend --lines 30 --nostream | grep -E "(å¯åŠ¨|CHROME_PATH|é”™è¯¯|Error)" | tail -10
    
    echo ""
    echo "âœ… éƒ¨ç½²å®Œæˆ"
else
    echo "âŒ æ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼š"
    npm run build 2>&1 | tail -30
fi
```

---

## ğŸ§ª ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æ—¥æœŸæå–

1. **æäº¤æµ‹è¯•æ–‡æ¡£**ï¼š
   ```
   https://rxxy4o2wwcf.feishu.cn/docx/QuHYdyjapoaF71xwRqfc8nXrnPc
   ```

2. **æŸ¥çœ‹å®Œæ•´æ—¥å¿—**ï¼š
   ```bash
   pm2 logs feihub-backend --lines 500 --nostream > /tmp/feihub-test-final.txt
   
   # æŸ¥çœ‹æ‰€æœ‰ Puppeteer ç›¸å…³çš„æ—¥å¿—
   cat /tmp/feihub-test-final.txt | grep "Puppeteer" | tail -200
   ```

---

## ğŸ” åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—

ä¿®å¤æˆåŠŸåï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š

```
[Puppeteer] é¢å¤–ç­‰å¾…ï¼Œç¡®ä¿æ—¥æœŸå…ƒç´ åŠ è½½å®Œæˆ...
[Puppeteer] âœ… æ‰¾åˆ°æ—¥æœŸå…ƒç´  .doc-info-time-item
[Puppeteer] ğŸ“… æ—¥æœŸå…ƒç´ å†…å®¹: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] ğŸ” pageData æå–ç»“æœï¼ˆè¯¦ç»†ï¼‰:
[Puppeteer] - æ ‡é¢˜: "..."
[Puppeteer] - ä½œè€…: "..."
[Puppeteer] - æ—¥æœŸï¼ˆåŸå§‹ï¼Œä» pageDataï¼‰: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] âœ… æ‰¾åˆ°æ—¥æœŸæ¥æº: .doc-info-time-item, å†…å®¹: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] å‡†å¤‡è§£ææ—¥æœŸ: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] è§£æåçš„æ—¥æœŸ: "2024-01-09"
[Puppeteer] æå–çš„æ—¥æœŸ: "2024-01-09"
```

---

è¯·å…ˆæ‰§è¡Œç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ã€‚ç„¶åæµ‹è¯•æ—¥æœŸæå–åŠŸèƒ½ã€‚

