# é‡æ–°æ„å»ºå’Œéƒ¨ç½² - æ‰§è¡Œæ­¥éª¤

## ğŸš€ åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub/backend

# é‡æ–°æ„å»º
echo "å¼€å§‹æ„å»º..."
npm run build

# æ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "âœ… æ„å»ºæˆåŠŸ"
    
    # å®Œå…¨é‡å¯ PM2
    echo "é‡å¯ PM2..."
    pm2 stop feihub-backend
    pm2 delete feihub-backend
    pm2 start npm --name feihub-backend -- run start
    
    # ç­‰å¾…å¯åŠ¨
    sleep 5
    
    # æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
    echo ""
    echo "=== å¯åŠ¨æ—¥å¿— ==="
    pm2 logs feihub-backend --lines 30 --nostream | grep -E "(å¯åŠ¨|CHROME_PATH|é”™è¯¯|Error)" | tail -10
    
    echo ""
    echo "âœ… éƒ¨ç½²å®Œæˆ"
else
    echo "âŒ æ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥é”™è¯¯ä¿¡æ¯ï¼š"
    npm run build 2>&1 | tail -30
fi
```

---

## ğŸ§ª æµ‹è¯•æ—¥æœŸæå–

### 1. æäº¤æµ‹è¯•æ–‡æ¡£

åœ¨ç½‘ç«™ä¸Šæäº¤ï¼š
```
https://rxxy4o2wwcf.feishu.cn/docx/QuHYdyjapoaF71xwRqfc8nXrnPc
```

### 2. æŸ¥çœ‹å®Œæ•´æ—¥å¿—

æäº¤åç«‹å³æ‰§è¡Œï¼š

```bash
pm2 logs feihub-backend --lines 500 --nostream > /tmp/feihub-test-final.txt

# æŸ¥çœ‹æ‰€æœ‰ Puppeteer ç›¸å…³çš„æ—¥å¿—
cat /tmp/feihub-test-final.txt | grep "Puppeteer" | tail -200

# æŸ¥çœ‹æ—¥æœŸç›¸å…³çš„æ—¥å¿—
cat /tmp/feihub-test-final.txt | grep -E "(æ—¥æœŸ|date|æ‰¾åˆ°æ—¥æœŸ|doc-info)" | tail -50
```

---

## ğŸ” åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—

ä¿®å¤æˆåŠŸåï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š

```
[Puppeteer] é¢å¤–ç­‰å¾…ï¼Œç¡®ä¿æ—¥æœŸå…ƒç´ åŠ è½½å®Œæˆ...
[Puppeteer] âœ… æ‰¾åˆ°æ—¥æœŸå…ƒç´  .doc-info-time-item
[Puppeteer] ğŸ“… æ—¥æœŸå…ƒç´ å†…å®¹: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] ğŸ” pageData æå–ç»“æœï¼ˆè¯¦ç»†ï¼‰:
[Puppeteer] - æ ‡é¢˜: "..."
[Puppeteer] - ä½œè€…: "..."
[Puppeteer] - æ—¥æœŸï¼ˆåŸå§‹ï¼Œä» pageDataï¼‰: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] âœ… æ‰¾åˆ°æ—¥æœŸæ¥æº: .doc-info-time-item, å†…å®¹: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] å‡†å¤‡è§£ææ—¥æœŸ: "2024å¹´1æœˆ9æ—¥ä¿®æ”¹"
[Puppeteer] è§£æåçš„æ—¥æœŸ: "2024-01-09"
[Puppeteer] æå–çš„æ—¥æœŸ: "2024-01-09"
[å¤„ç†æ–‡æ¡£] ğŸ“… æ—¥æœŸï¼ˆåŸå§‹ï¼‰: "2024-01-09"
```

---

è¯·å…ˆæ‰§è¡Œæ„å»ºå’Œéƒ¨ç½²æ­¥éª¤ï¼Œç„¶åæŠŠç»“æœå‘ç»™æˆ‘ã€‚å¦‚æœæ„å»ºæˆåŠŸï¼Œå†æµ‹è¯•æ—¥æœŸæå–åŠŸèƒ½ã€‚

