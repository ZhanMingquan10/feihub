# æ’æŸ¥ç½‘ç«™æ— æ³•è®¿é—®

## ğŸ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥ Nginx é…ç½®è¯­æ³•

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
# æ£€æŸ¥ Nginx é…ç½®è¯­æ³•
nginx -t
```

**å¦‚æœæ˜¾ç¤º `syntax is ok` å’Œ `test is successful`ï¼Œè¯´æ˜é…ç½®è¯­æ³•æ­£ç¡®ã€‚**

---

## ğŸ” ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ Nginx æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥ Nginx æ˜¯å¦è¿è¡Œ
systemctl status nginx

# å¦‚æœæ²¡è¿è¡Œï¼Œå¯åŠ¨å®ƒ
systemctl start nginx
```

---

## ğŸ” ç¬¬ä¸‰æ­¥ï¼šæ£€æŸ¥ç½‘ç«™é…ç½®æ–‡ä»¶

åœ¨å®å¡”æ–‡ä»¶ç®¡ç†å™¨ä¸­ï¼š
1. è¿›å…¥ `/www/server/panel/vhost/nginx/`
2. æ‰¾åˆ° `feihub.top.conf` æ–‡ä»¶
3. æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®

**æ­£ç¡®çš„é…ç½®åº”è¯¥åŒ…å«ï¼š**

```nginx
server {
    listen 80;
    server_name feihub.top www.feihub.top;
    root /www/wwwroot/feihub/dist;
    index index.html;
    
    # é™æ€æ–‡ä»¶é…ç½®
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # API åå‘ä»£ç†
    location /api {
        proxy_pass http://127.0.0.1:4000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_http_version 1.1;
    }
}
```

---

## ğŸ” ç¬¬å››æ­¥ï¼šæ£€æŸ¥é™æ€æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
# æ£€æŸ¥ dist ç›®å½•æ˜¯å¦å­˜åœ¨
ls -la /www/wwwroot/feihub/dist

# æ£€æŸ¥ index.html æ˜¯å¦å­˜åœ¨
ls -la /www/wwwroot/feihub/dist/index.html
```

---

## ğŸ” ç¬¬äº”æ­¥ï¼šæŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—

```bash
# æŸ¥çœ‹ Nginx é”™è¯¯æ—¥å¿—
tail -50 /www/server/nginx/logs/error.log
```

**æŠŠé”™è¯¯æ—¥å¿—å‘ç»™æˆ‘ï¼Œæˆ‘å¸®ä½ åˆ†æé—®é¢˜ã€‚**

---

## ğŸ”§ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šæ£€æŸ¥ç½‘ç«™æ ¹ç›®å½•é…ç½®

åœ¨å®å¡”é¢æ¿ï¼š
1. ç½‘ç«™ â†’ `feihub.top` â†’ è®¾ç½®
2. ç½‘ç«™ç›®å½•
3. ç¡®è®¤ **"ç½‘ç«™ç›®å½•"** æ˜¯ `/www/wwwroot/feihub/dist`
4. ç¡®è®¤ **"è¿è¡Œç›®å½•"** æ˜¯ `/`ï¼ˆæ ¹ç›®å½•ï¼‰

---

### æ–¹æ¡ˆäºŒï¼šæ£€æŸ¥é»˜è®¤æ–‡æ¡£

åœ¨å®å¡”é¢æ¿ï¼š
1. ç½‘ç«™ â†’ `feihub.top` â†’ è®¾ç½®
2. é»˜è®¤æ–‡æ¡£
3. ç¡®ä¿ `index.html` åœ¨åˆ—è¡¨ä¸­ï¼ˆé€šå¸¸æ˜¯ç¬¬ä¸€ä¸ªï¼‰

---

### æ–¹æ¡ˆä¸‰ï¼šé‡æ–°é…ç½®åå‘ä»£ç†

å¦‚æœåå‘ä»£ç†é…ç½®æœ‰é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. **åˆ é™¤åå‘ä»£ç†**
   - ç½‘ç«™ â†’ `feihub.top` â†’ è®¾ç½® â†’ åå‘ä»£ç†
   - åˆ é™¤ `api` ä»£ç†

2. **é‡æ–°æ·»åŠ åå‘ä»£ç†**
   - æ·»åŠ åå‘ä»£ç†
   - ä»£ç†åç§°ï¼š`api`
   - ç›®æ ‡URLï¼š`http://127.0.0.1:4000`
   - å‘é€åŸŸåï¼š`$host`

3. **æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶**
   - åœ¨åå‘ä»£ç†è®¾ç½®ä¸­ï¼Œç‚¹å‡»"é…ç½®æ–‡ä»¶"
   - ç¡®ä¿é…ç½®æ˜¯ï¼š
   ```nginx
   location /api {
       proxy_pass http://127.0.0.1:4000;
       proxy_set_header Host $host;
       proxy_set_header X-Real-IP $remote_addr;
       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
       proxy_set_header X-Forwarded-Proto $scheme;
       proxy_http_version 1.1;
   }
   ```

---

## ğŸš€ å¿«é€Ÿè¯Šæ–­å‘½ä»¤

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ï¼š

```bash
# 1. æ£€æŸ¥ Nginx é…ç½®
nginx -t

# 2. æ£€æŸ¥ Nginx çŠ¶æ€
systemctl status nginx

# 3. æ£€æŸ¥é™æ€æ–‡ä»¶
ls -la /www/wwwroot/feihub/dist/ | head -10

# 4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -20 /www/server/nginx/logs/error.log

# 5. æ£€æŸ¥ç«¯å£
netstat -tlnp | grep -E "80|443"
```

---

## ğŸ¯ ç°åœ¨æ‰§è¡Œ

å…ˆæ‰§è¡Œå¿«é€Ÿè¯Šæ–­å‘½ä»¤ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ï¼Œç‰¹åˆ«æ˜¯ï¼š
1. `nginx -t` çš„è¾“å‡º
2. `tail -20 /www/server/nginx/logs/error.log` çš„è¾“å‡º

è¿™æ ·æˆ‘å°±èƒ½çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜äº†ã€‚


