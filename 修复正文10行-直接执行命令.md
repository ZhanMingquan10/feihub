# 修复正文显示10行 - 直接执行命令

## 🚀 方法一：使用 Python 脚本（推荐）

在服务器上执行以下命令：

```bash
cd /www/wwwroot/feihub

# 备份
cp src/App.tsx src/App.tsx.bak

# 执行 Python 脚本修改
python3 << 'EOF'
import re

file_path = 'src/App.tsx'
with open(file_path, 'r', encoding='utf-8') as f:
    content = f.read()

# 查找并替换
old_pattern = r'<p className=\{clsx\("mt-4 text-sm leading-relaxed whitespace-pre-wrap", isDarkMode \? "text-gray-300" : "text-gray-600"\)\}>'
new_p_tag = '<p className={clsx("mt-4 text-sm leading-relaxed whitespace-pre-wrap overflow-hidden", isDarkMode ? "text-gray-300" : "text-gray-600")} style={{ display: \'-webkit-box\', WebkitLineClamp: 10, WebkitBoxOrient: \'vertical\' }}>'

content = content.replace(old_pattern, new_p_tag)

# 替换内容部分
old_content = '{doc.preview && doc.preview.length > 500 ? `${doc.preview.slice(0, 500)}...` : (doc.preview || "暂无预览")}'
new_content = '{doc.preview || "暂无预览"}'

content = content.replace(old_content, new_content)

with open(file_path, 'w', encoding='utf-8') as f:
    f.write(content)

print("✅ 修改成功")
EOF

# 验证
grep -n "WebkitLineClamp" src/App.tsx

# 重新构建
npm run build

# 重载 Nginx
nginx -s reload
```

## 🚀 方法二：使用 nano 手动编辑（如果方法一失败）

```bash
cd /www/wwwroot/feihub

# 备份
cp src/App.tsx src/App.tsx.bak

# 打开编辑器
nano src/App.tsx
```

**在 nano 中：**
1. 按 `Ctrl + W` 搜索：`doc.preview && doc.preview.length > 500`
2. 找到这一行（大约第380行）：
   ```tsx
   <p className={clsx("mt-4 text-sm leading-relaxed whitespace-pre-wrap", isDarkMode ? "text-gray-300" : "text-gray-600")}>
   ```
3. **修改为**：
   ```tsx
   <p className={clsx("mt-4 text-sm leading-relaxed whitespace-pre-wrap overflow-hidden", isDarkMode ? "text-gray-300" : "text-gray-600")} style={{ display: '-webkit-box', WebkitLineClamp: 10, WebkitBoxOrient: 'vertical' }}>
   ```
4. 找到内容部分（同一行或下一行）：
   ```tsx
   {doc.preview && doc.preview.length > 500 ? `${doc.preview.slice(0, 500)}...` : (doc.preview || "暂无预览")}
   ```
5. **修改为**：
   ```tsx
   {doc.preview || "暂无预览"}
   ```
6. 按 `Ctrl + O` 保存，按 `Enter` 确认，按 `Ctrl + X` 退出

**然后执行：**
```bash
# 验证
grep -n "WebkitLineClamp" src/App.tsx

# 重新构建
npm run build

# 重载 Nginx
nginx -s reload
```

---

## ✅ 推荐使用方法一（Python 脚本），更快速

请先执行方法一，如果失败再使用方法二。

