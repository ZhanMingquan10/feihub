# æ£€æŸ¥æ„å»ºåçš„ API åœ°å€

## ğŸ” é—®é¢˜åˆ†æ

ä»æµè§ˆå™¨æ§åˆ¶å°çœ‹ï¼š
- è¯·æ±‚çš„æ˜¯ `https://feihub.top/api/...`
- è¯´æ˜æ„å»ºåçš„ JavaScript æ–‡ä»¶ä¸­ä»ç„¶ä½¿ç”¨çš„æ˜¯åŸŸå
- ç¯å¢ƒå˜é‡å¯èƒ½æ²¡æœ‰æ­£ç¡®åŠ è½½

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æ„å»ºåçš„æ–‡ä»¶

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# æ£€æŸ¥æ„å»ºåçš„ JavaScript æ–‡ä»¶ä¸­çš„ API åœ°å€
grep -r "feihub.top" dist/assets/*.js | head -5

# æ£€æŸ¥æ˜¯å¦æœ‰ IP åœ°å€
grep -r "121.40.214.130" dist/assets/*.js | head -5

# æ£€æŸ¥ç¯å¢ƒå˜é‡æ–‡ä»¶
cat .env.production
```

---

### ç¬¬äºŒæ­¥ï¼šç¡®è®¤ç¯å¢ƒå˜é‡æ ¼å¼

`.env.production` æ–‡ä»¶åº”è¯¥æ˜¯ï¼š

```env
VITE_API_BASE=http://121.40.214.130/api
```

**æ³¨æ„**ï¼šä¸èƒ½æœ‰ç©ºæ ¼ï¼Œä¸èƒ½æœ‰å¼•å·ã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šå®Œå…¨æ¸…ç†å¹¶é‡æ–°æ„å»º

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# 1. ç¡®è®¤ç¯å¢ƒå˜é‡
cat .env.production

# 2. å®Œå…¨åˆ é™¤ dist ç›®å½•ï¼ˆé™¤äº†å¿…è¦çš„æ–‡ä»¶ï¼‰
sudo rm -rf dist/assets
sudo rm -rf dist/index.html
sudo rm -rf dist/404.html

# 3. é‡æ–°æ„å»º
npm run build

# 4. æ£€æŸ¥æ„å»ºç»“æœ
grep -r "121.40.214.130" dist/assets/*.js | head -3
grep -r "feihub.top" dist/assets/*.js | head -3
```

---

### ç¬¬å››æ­¥ï¼šå¦‚æœè¿˜æ˜¯ä½¿ç”¨åŸŸå

å¦‚æœæ„å»ºåçš„æ–‡ä»¶è¿˜æ˜¯ä½¿ç”¨åŸŸåï¼Œå¯èƒ½éœ€è¦ï¼š

1. **æ£€æŸ¥ vite.config.ts**ï¼šç¡®ä¿ç¯å¢ƒå˜é‡æ­£ç¡®åŠ è½½
2. **æ‰‹åŠ¨ä¿®æ”¹æ„å»ºåçš„æ–‡ä»¶**ï¼ˆä¸æ¨èï¼Œä½†å¯ä»¥ä¸´æ—¶æµ‹è¯•ï¼‰
3. **ä½¿ç”¨ä¸åŒçš„æ„å»ºæ–¹å¼**

---

## ğŸš€ å¿«é€Ÿä¿®å¤

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub

# 1. ç¡®è®¤ç¯å¢ƒå˜é‡ï¼ˆç¡®ä¿æ²¡æœ‰ç©ºæ ¼å’Œå¼•å·ï¼‰
echo "VITE_API_BASE=http://121.40.214.130/api" > .env.production
cat .env.production

# 2. å®Œå…¨æ¸…ç† dist
sudo rm -rf dist/assets dist/index.html dist/404.html

# 3. é‡æ–°æ„å»º
npm run build

# 4. æ£€æŸ¥ç»“æœ
grep -r "121.40.214.130" dist/assets/*.js | head -3
```

---

## ğŸ” å¦‚æœæ„å»ºåè¿˜æ˜¯ä½¿ç”¨åŸŸå

å¯èƒ½éœ€è¦æ£€æŸ¥ `vite.config.ts` çš„é…ç½®ï¼Œæˆ–è€…ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚

å…ˆæ‰§è¡Œå¿«é€Ÿä¿®å¤å‘½ä»¤ï¼ŒæŠŠç»“æœå‘ç»™æˆ‘ï¼Œç‰¹åˆ«æ˜¯ï¼š
1. `cat .env.production` çš„è¾“å‡º
2. `grep -r "121.40.214.130" dist/assets/*.js` çš„è¾“å‡º
3. `grep -r "feihub.top" dist/assets/*.js` çš„è¾“å‡º

è¿™æ ·æˆ‘å°±èƒ½çŸ¥é“å…·ä½“æ˜¯ä»€ä¹ˆé—®é¢˜äº†ã€‚


