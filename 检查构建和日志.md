# æ£€æŸ¥æ„å»ºå’Œæ—¥å¿—

## ğŸ” ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥æ„å»ºæ˜¯å¦æˆåŠŸ

åœ¨å®å¡”ç»ˆç«¯æ‰§è¡Œï¼š

```bash
cd /www/wwwroot/feihub/backend

# 1. æ£€æŸ¥æ„å»ºæ—¶é—´
ls -la dist/index.js

# 2. æ£€æŸ¥æ„å»ºåçš„ä»£ç æ˜¯å¦åŒ…å«æ–°çš„æ—¥å¿—
grep -n "ç¯å¢ƒå˜é‡ CHROME_PATH" dist/index.js
grep -n "getChromePath" dist/index.js | head -5

# 3. å¦‚æœæ‰¾ä¸åˆ°ï¼Œè¯´æ˜éœ€è¦é‡æ–°æ„å»º
```

---

## ğŸš€ ç¬¬äºŒæ­¥ï¼šé‡æ–°æ„å»º

```bash
cd /www/wwwroot/feihub/backend

# é‡æ–°æ„å»º
npm run build

# æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯
if [ $? -eq 0 ]; then
  echo "âœ… æ„å»ºæˆåŠŸ"
else
  echo "âŒ æ„å»ºå¤±è´¥"
  exit 1
fi
```

---

## ğŸ”„ ç¬¬ä¸‰æ­¥ï¼šé‡å¯æœåŠ¡

```bash
# é‡å¯ PM2
pm2 restart feihub-backend

# ç­‰å¾…å‡ ç§’è®©æœåŠ¡å¯åŠ¨
sleep 3

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼ˆæ‰€æœ‰æ—¥å¿—ï¼Œä¸ç­›é€‰ï¼‰
pm2 logs feihub-backend --lines 50 --nostream
```

---

## ğŸ“ ç¬¬å››æ­¥ï¼šæµ‹è¯•ç¯å¢ƒå˜é‡

```bash
cd /www/wwwroot/feihub/backend

# æ‰‹åŠ¨æµ‹è¯•ç¯å¢ƒå˜é‡åŠ è½½
node -e "
require('dotenv').config({ path: require('path').resolve(__dirname, '../.env') });
console.log('CHROME_PATH:', process.env.CHROME_PATH);
console.log('æ–‡ä»¶è·¯å¾„:', require('path').resolve(__dirname, '../.env'));
"
```

---

## ğŸ†˜ å¦‚æœç¯å¢ƒå˜é‡è¿˜æ˜¯è¯»å–ä¸åˆ°

å¯èƒ½éœ€è¦æ£€æŸ¥ï¼š
1. `.env` æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
2. `dotenv.config()` æ˜¯å¦åœ¨æ­£ç¡®çš„ä½ç½®è°ƒç”¨
3. PM2 æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„ç¯å¢ƒå˜é‡


