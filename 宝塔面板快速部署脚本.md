# 宝塔面板快速部署命令

在宝塔面板的"终端"中，依次执行以下命令：

## 1. 进入项目目录
```bash
cd /www/wwwroot/feihub
```

## 2. 安装后端依赖
```bash
cd backend
npm install --production
```

## 3. 运行数据库迁移
```bash
npx prisma generate
npx prisma migrate deploy
```

## 4. 构建后端
```bash
npm run build
```

## 5. 启动后端服务
```bash
# 创建日志目录
mkdir -p logs

# 启动 PM2
pm2 start ecosystem.config.js

# 保存配置
pm2 save

# 设置开机自启
pm2 startup
```

## 6. 构建前端
```bash
cd /www/wwwroot/feihub
npm install
npm run build
```

## 7. 检查服务状态
```bash
# 检查 PM2 服务
pm2 status

# 检查后端日志
pm2 logs feihub-backend

# 检查 Node.js 版本
node -v

# 检查 PostgreSQL
systemctl status postgresql

# 检查 Redis
systemctl status redis
```

## 8. 常用维护命令

### 重启后端
```bash
pm2 restart feihub-backend
```

### 停止后端
```bash
pm2 stop feihub-backend
```

### 查看日志
```bash
pm2 logs feihub-backend --lines 100
```

### 更新代码后重新部署
```bash
cd /www/wwwroot/feihub
# 拉取最新代码或上传新文件后
cd backend
npm install --production
npm run build
pm2 restart feihub-backend

cd ..
npm install
npm run build
```


